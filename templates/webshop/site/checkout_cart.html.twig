{% extends 'webshop/site/base_site.html.twig' %}

{% block title %}
    Kosár | {{ parent() }}
{% endblock %}



{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('webshop/site/checkout.css') }}" rel="stylesheet" />
{% endblock %}

{% block page_content %}
<div class="JS--globalWrapper">
    <section name="progress_bar">
        <div class="container mt-4 mb-4">
            <div class="row">
                <div class="col-lg-12">
                        <div class="row text-center">
                            <div class="col-4 text-muted">
                                <p class="text-primary font-weight-bold">1. Kosár</p>
                            </div>
                            <div class="col-4 text-muted">
                                <p>2. Pénztár</p>
                            </div>
                            <div class="col-4 text-muted">
                                <p>3. Rendelés véglegesítése</p>
                            </div>

                        </div>

                        <div class="row text-center">
                            <div class="col-4 text-muted" style="margin-bottom: -22px">
                                <i class="fas fa-2x fa-sort-up text-primary"></i>
                            </div>
                            <div class="col-4 text-muted">
                            </div>
                            <div class="col-4 text-muted">
                            </div>
                        </div>

                        <div class="progress rounded">
                            <div class="progress-bar bg-primary" role="progressbar" style="width: 33%" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>

                        <div class="col-lg-12 pt-3">
                            {{ form_start(clearForm) }}
                                {{ form_widget(clearForm.id) }}
                                {{ form_widget(clearForm.submit) }}
                            {{ form_end(clearForm) }}
                        </div>
                </div>


            </div>
        </div>
    </section>

	<!-- Cart -->
	<section name="kosar">
		<div class="container mb-4">
			<div class="row">
				<div class="col-lg-8">
					<div class="cart bg-white">
						<div class="cart-wrapper JS--cartWrapper">

                            <!-- termekek a kosarban -->
							<div class="checkout-block-header">
                                <div class="row">
                                    <div class="col-xl-12 mx-autoX">
                                        <h4 class="text-uppercase">Kosár</h4>
                                    </div>
                                </div>
							</div>

							<div class="cart-body JS--resultWrapper">
                                {{ include('webshop/cart/product_list.html.twig') }}
							</div>
						</div>

					</div>

				</div>
				<div class="col-lg-4">
					<div class="block mt-lg-0 mt-md-4">
						<div class="block-header">
							<h6 class="text-uppercase mb-0">Order Summary</h6>
						</div>
						<div class="block-body bg-white pt-1">
							<p class="text-sm pt-3">Shipping and additional costs are calculated based on values you have entered.</p>
							<ul class="order-summary mb-0 list-unstyled">
								<li class="order-summary-item">
                                    <span>Részösszeg </span>
                                    <span>{{  order.summary.totalBeforeDiscount|number_format(0, ',', ' ') }} Ft</span>
                                </li>
								<li class="order-summary-item">
                                    <span>Szállítás</span>
                                    <span> Ft</span>
                                </li>
								<li class="order-summary-item">
                                    <span>Kedvezmény</span>
                                    <span>Ide jön a kedvezmény %:</span>
                                </li>
								<li class="order-summary-item border-0">
                                    <span>Fizentendő {# totalAmountToPay #}</span>
                                    <strong class="order-summary-total">{{ order.summary.totalAmountToPay|number_format(0, ',', ' ') }} Ft</strong>
                                </li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

    <section name="kupon_ervenyesites">
        <div class="container mb-4">
            <div class="row">
                <div class="col-lg-12">
                    <div class="cart bg-white">
                        <div class="cart-wrapper">

                            <!-- header -->
                            <div class="checkout-block-header">
                                <div class="row">
                                    <div class="col-xl-12 mx-autoX">
                                        <h4 class="text-uppercase">Kupon beváltása</h4>
                                        <!--p class="text-sm text-muted">Lorem ipsum travali balius</p-->
                                    </div>
                                </div>
                            </div>

                            <!-- body-->
                            {{ form_start(setDiscountForm) }}
                                <div class="block-body col-lg-12">
                                    <div class="row">

                                        <div class="form-group col-lg-6">
                                            <label for="coupon_code" class="form-label">Kuponkód</label>
                                            <div class="form-inline">
                                            <!--input type="text" name="coupon_code" placeholder="Kuponkód" id="coupon_code" class="form-control">
                                                <button type="submit" value="Bevált" class="btn btn-dark form-control ml-2" formnovalidate="">Bevált</button-->
                                                {{ form_widget(setDiscountForm.id) }}
                                                {{ form_widget(setDiscountForm.couponCode) }}
                                                {{ form_widget(setDiscountForm.submit) }}
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            {{ form_end(setDiscountForm) }}

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Ajandek valasztasa -->
    {#{{ render(controller('App\\Controller\\Shop\\CartController::pickAGift')) }}#}
    <!-- /Ajandek valasztasa -->

    <section name="szallitasi_cim">
        <div class="container mb-4">
            <div class="row">
                <div class="col-lg-12">
                    <div class="cart bg-white">
                        <div class="cart-wrapper">

                            <!-- header -->
                            <div class="checkout-block-header">
                                <div class="row">
                                    <div class="col-xl-8 mx-autoX">
                                        <h4 class="text-uppercase">Szállítási cím</h4>
                                    </div>
                                </div>
                            </div>

                            <div class="block-body JS--wrapper">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <p class="text-smX text-mutedX">Kinek küldöd? A sikeres kézbesítéshez add meg a címzett személy nevét, címét, telefonszámát.</p>
                                    </div>
                                </div>

                                <div class="JS--resultWrapper">
                                    {{ include('webshop/cart/recipient_list.html.twig') }}
                                </div>
                                <div class="JS--formWrapper">
                                    {% if recipientForm is defined %}
                                        {{ include('webshop/cart/recipient_form.html.twig') }}
                                    {% endif %}
                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            </div>
        </div>
    </section>


    <section name="uzenet_irasa">
        <div class="container mb-4">
            <div class="row">
                <div class="col-lg-12">
                    <div class="cart bg-white">
                        <div class="cart-wrapper">

                            <!-- header -->
                            <div class="checkout-block-header">
                                <div class="row">
                                    <div class="col-xl-8 mx-autoX">
                                        <h4 class="text-uppercase">Üzenet a címzettnek</h4>
                                        <!--p class="text-sm text-muted">Megadhatsz egy egyéni üzenetet, amelyet egy üdvözlölapra írunk.</p-->
                                    </div>
                                </div>
                            </div>
                            <!-- body-->
                            <div class="block-body col-lg-6 JS--messageWrapper">

                                <!-- Message -->
                                <div class="JS--formWrapper">
                                    {{ render(controller('App\\Controller\\Shop\\CartController::createMessageForm', {'id' : order.id})) }}
                                </div>
                                <!-- /Message -->

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section name="tovabb_lepes">
        <div class="container mb-5">
            <div class="row">
                <div class="col-lg-12">

                    <div class="d-flex justify-content-between flex-column flex-lg-row">
                        <a href="category.html" class="btn btn-lg btn-link text-muted order-2 order-lg-1"><i class="fa fa-chevron-left"></i> Vásárlás folytatása</a>
                        <a href="{{ path('site-checkout') }}" class="JS--Button-nextStep btn btn-lg btn-success order-1 order-lg-2">Tovább a fizetéshez <i class="fa fa-chevron-right"></i></a>
                    </div>

                </div>
            </div>
        </div>
    </section>
</div>



{% endblock %}

{% block javascripts %}
	{{ parent() }}
    <script>
        $(document).ready(function () {
            var $wrapper = $('.JS--cartWrapper');
            var inlineEdit1 = new InlineEdit($wrapper);
        });
        $(document).ready(function () {
            var $wrapper1 = $('.JS--wrapper');
            var inlineEdit = new InlineEdit($wrapper1);
        });
        $(document).ready(function () {
            var $wrapper = $('.JS--globalWrapper');
            var inlineEdit = new InlineEdit($wrapper);
        });

    </script>
{% endblock %}
