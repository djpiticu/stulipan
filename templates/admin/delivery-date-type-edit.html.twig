{% extends 'admin/base_admin.html.twig' %}

{% block title %}
	{{ title }}
{% endblock %}

{% block page_content %}

	<!-- page title -->
	{{ include('/admin/_title_widget.html.twig') }}

	<!-- header of default page content widget -->
	{{ include('/admin/_header_of_default_page_content.html.twig') }}

	<div class="row mb-2">
		<div class="col-lg-12">
		</div>
	</div>

	{{ include('/admin/_delivey-date-type-form.html.twig') }}

	<!-- footer of default page content widget -->
	{{ include('/admin/_footer_of_default_page_content.html.twig') }}

{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script>
        jQuery(document).ready(function() {
            var $wrapper = $('.JS--Wrapper-allIntervals');
            var $inputFieldsWrapper = $('.JS--Wrapper-fieldsForOneInterval');
            var $button = $wrapper.find('a');
//            console.dir($button);
//            console.log($inputFieldsWrapper);
//            console.log($wrapper);

            $inputFieldsWrapper.data('index', $inputFieldsWrapper.find(':input').length);  // count input fields in wrapper
            $wrapper.on('click', '.JS--Button-addNewInterval', function(e) {
                e.preventDefault();
//                console.log($inputFieldsWrapper.data('index'));

                var prototype = $inputFieldsWrapper.data('prototype');
                var index = $inputFieldsWrapper.data('index');   // get the new index
                    // Replace '__name__' in the prototype's HTML to
                    // instead be a number based on how many items we have
                var newForm = prototype.replace(/__name__/g, index);
                $inputFieldsWrapper.data('index', index + 1); // increase the index with one for the next item
                $inputFieldsWrapper.append(newForm); // Display the form in the page before the "new" link
            });
        });
    </script>
{% endblock %}

