{% extends 'admin/base_admin.html.twig' %}

{% block title %}
	Termékek
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('build/stulipan_react.css') }}" />
{% endblock %}

{% block page_content %}
		
	{% block LISTA %}

		<!-- page title -->
        {{ include('/admin/_title_widget.html.twig') }}

		<!-- header of default page content widget -->
        {{ include('/admin/_header_of_default_page_content.html.twig') }}

		<div class="row mb-2">
			<div class="col-lg-8">

			</div>
			<div class="col-lg-4">
				<div class="text-right">
					<a href="{{ path('product-new') }}" class="btn btn-primary mb-2"><i class="fas fa-plus-circle mr-1"></i> Termék hozzáadása</a>
				</div>
			</div><!-- end col-->
		</div>


        <div class="table-responsive mb-3">
            <table class="table table-striped table-borderedX table-borderless table-hover mb-0 JS--wrapper" id="product-listX" data-page-length="25">
                <thead class="thead-light">
				<tr>
					{#<th scope="col">#</th>#}
					<th scope="col" class="text-center">Kép</th>
					<th scope="col">Terméknév</th>
					<th scope="col">Ár</th>
					<th scope="col">Mennyiség</th>
					<th scope="col">Kategória</th>
					<th scope="col">SKU</th>
                    <th scope="col">Állapot</th>
					<th scope="col"><i class="fas fa-ellipsis-h"></i></th>
				</tr>
				</thead>
				<tbody>
				{% if products is defined %}
				{% for product in products %}
				<tr>
					{#<td class="align-middle">{{ product.id }}</td>#}
                    <td class="align-middle text-center">
                        {% if product.coverImage is defined and product.coverImage %}
                            <a href="{{ uploaded_asset(product.coverImage) }}" target="_blank">
                                {#<img class="img-thumbnail" src="{{ asset('/uploads/images/termekek/' ~ category.image) }}" style="max-height: 50px; width: 250px;" />#}
                                <img class="img-thumbnail" src="{{ uploaded_asset(product.coverImage)|imagine_filter('product_thumbnail') }}" style="width: 50px; width: 50px;" />
                            </a>
                        {% endif %}
                        
                        {#<a href="{{ uploaded_asset('')asset('/uploads/images/termekek/' ~ product.image) }}" target="_blank">#}
                            {#<img class="img-thumbnail rounded-circleX" src="{{ asset('/uploads/images/termekek/' ~ product.image) }}" width="50px;" />#}
                        {#</a>#}
                    </td>
					<td class="align-middle text-left"><a href="{{ path('product-edit', {'id': product.id}) }}" class="">
                            {{ product.name }}</a>
					</td>
					<td class="align-middle text-right text-nowrap">{{ product.price.grossPrice|number_format(0, ',', ' ')  }},-</td>
					<td class="align-middle text-right">
						<span class="badge badge-primary">
							<span class="JS--result">{{ product.stock }}</span>
                            <a href="" class="JS--editButton text-white ml-1" data-url="{{ path('product-edit-stock', {id: product.id}) }}"><i class="fas fa-pen"></i></a>
                        </span>
                        <span class="d-none"></span>
                    </td>
					<td class="align-middle">
                        {% if product.categories is defined %}
                        {% for category in product.categories %}
						    {{ category }} <br>
                        {% endfor %}
                        {% endif %}
                    </td>
					<td class="align-middle">{{ product.sku }}</td>
					<td class="align-middle">
						<span class="badge text-mutedX font-weight-normalX badge-{% if product.status.id == 1 %}success{% elseif product.status.id == 2 %}info{% else %}danger{% endif %}">{{ product.status }}</span>
					</td>
					<td class="align-middle">
						<div class="w-100">
                            <a href="{{ path('product-edit', {'id': product.id}) }}" class="btn btn-sm btn-outline-secondary" title="Módosít">
                                <i class="far fa-edit"></i></a>
                            <a href="{{ path('site-product-show', {'id': product.id}) }}" class="btn btn-sm btn-outline-secondary" target="_blank" title="Megtekinti a weboldalon">
                                <i class="fas fa-external-link-alt"></i></a>
                            <a href="{{ path('product-delete', {'id': product.id}) }}" onclick="alert('Biztosan törölni akarod?')" class="btn btn-sm btn-outline-secondary" title="Töröl">
                                <i class="far fa-trash-alt"></i></a>
						</div>
					</td>
				</tr>
				{% endfor %}
				{% else %}
				<tr>
			        <td><li><em>Nem talált termékeket!</em></li></td>
			    </tr>
				{% endif %}
				</tbody>
			</table>
		</div>
		<div class="pagerfanta">
			{# { pagerfanta(paginator) } #}
		</div>

		<div class="rowX">
			<div id="RA--valamiX">

			</div>
			<hr />
		</div>

        <!-- footer of default page content widget -->
        {{ include('/admin/_footer_of_default_page_content.html.twig') }}

	{% endblock %}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $(document).ready(function () {
            var $wrapper = $('.JS--wrapper');
            var inlineEdit = new InlineEdit($wrapper);
        });
    </script>
    <script src="{{ asset('build/stulipan_react.js') }}"></script>
{% endblock %}
